<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib prefix="core" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page import="java.util.*,java.sql.Connection,java.sql.DriverManager,java.sql.SQLException,java.sql.Statement,java.sql.ResultSet" session="true"%>
<%@ page errorPage="ShowError.jsp" %>
  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Awards</title>
<link href="more.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
var myArray = new Array();
var loc = -1;
var insertflag1;

var upstatus;
 function approvedelete() {
   	 	var index = document.getElementById("r2").selectedIndex;
	if(parseInt(index) == 1){
	<% 
	try{
			Class.forName ("com.mysql.jdbc.jdbc2.optional.MysqlDataSource").newInstance();
			
			Class.forName("com.mysql.jdbc.Driver").newInstance(); 
			Connection con = DriverManager.getConnection("jdbc:mysql://bigyellowcat.cs.binghamton.edu/more", "more", "more7755");
			
		    // Create statement
		    Statement stmt = con.createStatement();
		    
			String query1 = "SELECT * FROM AwardList";
		    // Execute the query
		    ResultSet rs1 = stmt.executeQuery(query1);
		  
		    	ArrayList<String>  aawardname =  new ArrayList<String>();
		    	
		    	while(rs1.next())
			      {
			          String str1 = rs1.getString("AwardName");
			          aawardname.add(str1);
			      }
			      session.setAttribute("aawardname", aawardname);
		}catch (SQLException e) {
			out.print("Error on authentication: " + e.toString());
			RequestDispatcher rd = request
					.getRequestDispatcher("./entranceAdminFunction.jsp");
			rd.include(request, response);
		}
	%>
	}else if(parseInt(index) == 2){
		<% 
		try{
				Class.forName ("com.mysql.jdbc.jdbc2.optional.MysqlDataSource").newInstance();
				
				Class.forName("com.mysql.jdbc.Driver").newInstance(); 
				Connection con = DriverManager.getConnection("jdbc:mysql://bigyellowcat.cs.binghamton.edu/more", "more", "more7755");
				
			    // Create statement
			    Statement stmt = con.createStatement();
			    
				String query1 = "SELECT * FROM AwardList";
			    // Execute the query
			    ResultSet rs1 = stmt.executeQuery(query1);
			  
			    	ArrayList<String>  aawardname =  new ArrayList<String>();
			    	
			    	while(rs1.next())
				      {
				          String str1 = rs1.getString("AwardName");
				          aawardname.add(str1);
				      }
				      session.setAttribute("aawardname", aawardname);
			}catch (SQLException e) {
				out.print("Error on authentication: " + e.toString());
				RequestDispatcher rd = request
						.getRequestDispatcher("./entranceAdminFunction.jsp");
				rd.include(request, response);
			}
		%>
	}
}
function successCallback(){
   	var name = '<%= session.getAttribute( "suidApprove" ) %>';
	var details = '<%= session.getAttribute( "ruidApprove" ) %>';
	var name1 = '<%= session.getAttribute( "sdeptApprove" ) %>';
	var details1 = '<%= session.getAttribute( "rdeptApprove" ) %>';
	var name2 = '<%= session.getAttribute( "awardApprove" ) %>';
	
		var array1Token = name.toString();
		array1Token = array1Token.slice(1, array1Token.length-1); 
		var fields = array1Token.split(/,/);
		
		var array2Token = details.toString();
		array2Token = array2Token.slice(1, array2Token.length-1); 
		var fields2 = array2Token.split(/,/);
		
		var array1Token1 = name1.toString();
		array1Token1 = array1Token1.slice(1, array1Token1.length-1); 
		var fields3 = array1Token1.split(/,/);
		
		var array2Token2 = details1.toString();
		array2Token2 = array2Token2.slice(1, array2Token2.length-1); 
		var fields4 = array2Token2.split(/,/);
		
		var array1Token3 = name2.toString();
		array1Token3 = array1Token3.slice(1, array1Token3.length-1); 
		var fields5 = array1Token3.split(/,/);
		
		
		loc = -1;
		
 		for (var i = 0; i < 3 ; i++) {
					var num = i + 1;
					var n = num.toString(); 
					
					var name = "name".concat(n);
					document.getElementById(name).value = "";
					
					var sssn = "detail".concat(n);
					document.getElementById(sssn).value = "";
					
					var sdept = "sdept".concat(n);
					document.getElementById(sdept).value = "";
					
					var rdept = "rdept".concat(n);
					document.getElementById(rdept).value = "";
					
					var award = "award".concat(n);
					document.getElementById(award).value = "";
					
					var pos = "pos".concat(n);
					document.getElementById(pos).value = "";
		}
										
		for (var i = 0; i < fields.length ; i++) {
					if(i >= 3) {
						loc = loc + 1;
					
							document.getElementById("name1").value = fields[i-2];
							document.getElementById("detail1").value = fields2[i-2];
							document.getElementById("sdept1").value = fields3[i-2];
							document.getElementById("rdept1").value = fields4[i-2];
							document.getElementById("award1").value = fields5[i-2];
							document.getElementById("pos1").value = i-2;
							
							document.getElementById("name2").value = fields[i-1];
							document.getElementById("detail2").value = fields2[i-1];
							document.getElementById("sdept2").value = fields3[i-1];
							document.getElementById("rdept2").value = fields4[i-1];
							document.getElementById("award2").value = fields5[i-1];
							document.getElementById("pos2").value = i-1;

							document.getElementById("name3").value = fields[i];
							document.getElementById("detail3").value = fields2[i];
							document.getElementById("sdept3").value = fields3[i];
							document.getElementById("rdept3").value = fields4[i];
							document.getElementById("award3").value = fields5[i];
							document.getElementById("pos3").value = i;
							
					
					}
					else{
						
							loc = loc + 1;
							var num = i + 1;
							var n = num.toString(); 
							
							var name = "name".concat(n);
							document.getElementById(name).value = fields[i];
							
							var sssn = "detail".concat(n);
							document.getElementById(sssn).value = fields2[i];
							
							var sdept = "sdept".concat(n);
					document.getElementById(sdept).value = fields3[i];
					
					var rdept = "rdept".concat(n);
					document.getElementById(rdept).value = fields4[i];
					
					var award = "award".concat(n);
					document.getElementById(award).value = fields5[i];
					
							var pos = "pos".concat(n);
							document.getElementById(pos).value = i;
							alert(pos);
					}
					
				}
				
}

function scrollDown()
{	
		var scrollstatus = document.getElementById("pos1").value;
		
		 	var name = '<%= session.getAttribute( "suidApprove" ) %>';
	var details = '<%= session.getAttribute( "ruidApprove" ) %>';
	var name1 = '<%= session.getAttribute( "sdeptApprove" ) %>';
	var details1 = '<%= session.getAttribute( "rdeptApprove" ) %>';
	var name2 = '<%= session.getAttribute( "awardApprove" ) %>';
	
		var array1Token = name.toString();
		array1Token = array1Token.slice(1, array1Token.length-1); 
		var fields = array1Token.split(/,/);
		
		var array2Token = details.toString();
		array2Token = array2Token.slice(1, array2Token.length-1); 
		var fields2 = array2Token.split(/,/);
		
		var array1Token1 = name1.toString();
		array1Token1 = array1Token1.slice(1, array1Token1.length-1); 
		var fields3 = array1Token1.split(/,/);
		
		var array2Token2 = details1.toString();
		array2Token2 = array2Token2.slice(1, array2Token2.length-1); 
		var fields4 = array2Token2.split(/,/);
		
		var array1Token3 = name2.toString();
		array1Token3 = array1Token3.slice(1, array1Token3.length-1); 
		var fields5 = array1Token3.split(/,/);
		
		
		loc = -1;
		
	if(fields.length < 3 || (parseInt(parseInt(scrollstatus) + 3))== fields.length){
			alert("Cannot scroll down");
	}else {
 		for (var i = 0; i < 3 ; i++) {
					var num = i + 1;
					var n = num.toString(); 
					
					var name = "name".concat(n);
					document.getElementById(name).value = "";
					
					var sssn = "detail".concat(n);
					document.getElementById(sssn).value = "";
					
					var sdept = "sdept".concat(n);
					document.getElementById(sdept).value = "";
					
					var rdept = "rdept".concat(n);
					document.getElementById(rdept).value = "";
					
					var award = "award".concat(n);
					document.getElementById(award).value = "";
					
					var pos = "pos".concat(n);
					document.getElementById(pos).value = "";
		}
	
		var i = parseInt(parseInt(scrollstatus));
							
							document.getElementById("name1").value = fields[i+1];
							document.getElementById("detail1").value = fields2[i+1];
							document.getElementById("sdept1").value = fields3[i+1];
							document.getElementById("rdept1").value = fields4[i+1];
							document.getElementById("award1").value = fields5[i+1];
							document.getElementById("pos1").value = i+1;

							document.getElementById("name2").value = fields[i+2];
							document.getElementById("detail2").value = fields2[i+2];
							document.getElementById("sdept2").value = fields3[i+2];
							document.getElementById("rdept2").value = fields4[i+2];
							document.getElementById("award2").value = fields5[i+2];
							document.getElementById("pos2").value = i+2;

							document.getElementById("name3").value = fields[i+3];
							document.getElementById("detail3").value = fields2[i+3];
							document.getElementById("sdept3").value = fields3[i+3];
							document.getElementById("rdept3").value = fields4[i+3];
							document.getElementById("award3").value = fields5[i+3];
							document.getElementById("pos3").value = i+3;					
		}
}

function scrollUp()
{
		var scrollstatus = document.getElementById("pos3").value;
			 	var name = '<%= session.getAttribute( "suidApprove" ) %>';
	var details = '<%= session.getAttribute( "ruidApprove" ) %>';
	var name1 = '<%= session.getAttribute( "sdeptApprove" ) %>';
	var details1 = '<%= session.getAttribute( "rdeptApprove" ) %>';
	var name2 = '<%= session.getAttribute( "awardApprove" ) %>';
	
		var array1Token = name.toString();
		array1Token = array1Token.slice(1, array1Token.length-1); 
		var fields = array1Token.split(/,/);
		
		var array2Token = details.toString();
		array2Token = array2Token.slice(1, array2Token.length-1); 
		var fields2 = array2Token.split(/,/);
		
		var array1Token1 = name1.toString();
		array1Token1 = array1Token1.slice(1, array1Token1.length-1); 
		var fields3 = array1Token1.split(/,/);
		
		var array2Token2 = details1.toString();
		array2Token2 = array2Token2.slice(1, array2Token2.length-1); 
		var fields4 = array2Token2.split(/,/);
		
		var array1Token3 = name2.toString();
		array1Token3 = array1Token3.slice(1, array1Token3.length-1); 
		var fields5 = array1Token3.split(/,/);
		
		
		
		loc = -1;
		
		if(fields.length < 3 || (parseInt(parseInt(scrollstatus) - 3)) < 0){
				alert("Cannot scroll up");
		}else {
	 		for (var i = 0; i < 3 ; i++) {
					var num = i + 1;
					var n = num.toString(); 
					
					var name = "name".concat(n);
					document.getElementById(name).value = "";
					
					var sssn = "detail".concat(n);
					document.getElementById(sssn).value = "";
					
					var sdept = "sdept".concat(n);
					document.getElementById(sdept).value = "";
					
					var rdept = "rdept".concat(n);
					document.getElementById(rdept).value = "";
					
					var award = "award".concat(n);
					document.getElementById(award).value = "";
					
					
					var pos = "pos".concat(n);
					document.getElementById(pos).value = "";
					
		}
	
		var i = parseInt(parseInt(scrollstatus));
							document.getElementById("name1").value = fields[i-3];
							document.getElementById("detail1").value = fields2[i-3];
							document.getElementById("sdept1").value = fields3[i-3];
							document.getElementById("rdept1").value = fields4[i-3];
							document.getElementById("award1").value = fields5[i-3];
							document.getElementById("pos1").value = i-3;

							document.getElementById("name2").value = fields[i-2];
							document.getElementById("detail2").value = fields2[i-2];
							document.getElementById("sdept2").value = fields3[i-2];
							document.getElementById("rdept2").value = fields4[i-2];
							document.getElementById("award2").value = fields5[i-2];
							document.getElementById("pos2").value = i-2;

							document.getElementById("name3").value = fields[i-1];
							document.getElementById("detail3").value = fields2[i-1];
							document.getElementById("sdept3").value = fields3[i-1];
							document.getElementById("rdept3").value = fields4[i-1];
							document.getElementById("award3").value = fields5[i-1];
							document.getElementById("pos3").value = i-1;
						
		}
}

</script>
</head>
<body  onload="successCallback()">
		<h1>Award Form</h1>
			<form name="myForm"  method="POST" action="entranceAwardWinners">
				<table width="page">
					<tr>
						<td align="center">Award</td>
						<td align="center">Details</td>
						<td></td>
					</tr>
					<tr>
						<td><input type="submit" name="sub" id="sub1" value="Select1"></td>
						<td><input id="name1" type="text" name="name1" readonly></td>
						<td><input id="detail1" type="text" name="detail" readonly></td>
						<td><input id="sdept1" type="text" name="sdept" readonly></td>
						<td><input id="rdept1" type="text" name="rdept" readonly></td>
						<td><input id="award1" type="text" name="award" readonly></td>
						<td>
	 					    <select name="approve1" id="approve" onchange="approvedelete()">  
						        <OPTION  value="-1" label="--Select--" selected="selected">  
						        <option value="ACTIVE">ACTIVE</option>
						        <option value="INACTIVE">INACTIVE</option>
						     </select> 
					    </td>
						<td><input type="button" name="up" value="Scroll Up" onClick="scrollUp()"></td>
						<td><input id="pos1" type="hidden" readonly></td>
					</tr>
					<tr>
						<td><input type="submit" name="sub" id="sub2" value="Select2"></td>
						<td><input id="name2" type="text" name="name2" readonly></td>
						<td><input id="detail2" type="text" name="detail" readonly></td>
						<td><input id="sdept2" type="text" name="sdept" readonly></td>
						<td><input id="rdept2" type="text" name="rdept" readonly></td>
						<td><input id="award2" type="text" name="award" readonly></td>
						<td>
	 					    <select name="approve2" id="approve" onchange="approvedelete()">  
						        <OPTION  value="-1" label="--Select--" selected="selected">  
						        <option value="ACTIVE">ACTIVE</option>
						        <option value="INACTIVE">INACTIVE</option>
						     </select> 
					    </td>
						<td><input id="pos2" type="hidden" readonly></td>
					</tr>
					<tr>
						<td><input type="submit" name="sub" id="sub3" value="Select3"></td>
						<td><input id="name3" type="text" name="name3" readonly></td>
						<td><input id="detail3" type="text" name="detail" readonly></td>
						<td><input id="sdept3" type="text" name="sdept" readonly></td>
						<td><input id="rdept3" type="text" name="rdept" readonly></td>
						<td><input id="award3" type="text" name="award" readonly></td>
						<td>
	 					    <select name="approve3" id="approve" onchange="approvedelete()">  
						        <OPTION  value="-1" label="--Select--" selected="selected">  
						        <option value="ACTIVE">ACTIVE</option>
						        <option value="INACTIVE">INACTIVE</option>
						     </select> 
					    </td>
						<td><input type="button" name="down" value="Scroll Down" onClick="scrollDown()"></td>
						<td><input id="pos3" type="hidden" readonly></td>
					</tr>
				</table>
			</form>
</body>
</html>